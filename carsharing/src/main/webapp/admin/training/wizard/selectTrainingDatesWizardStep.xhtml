<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:te="http://java.sun.com/jsf/composite/de.carsharing.jsf.comp"
                xmlns:rich="http://richfaces.org/rich">

    <div style="position: relative; height: auto">
        <table border="0" width="100%" cellpadding="5">
            <tr>
                <td width="20%" class="colHeader"><b>Mannschaft</b></td>
                <td width="20%" class="colHeader">Trainingszeit</td>
                <td width="20%" class="colHeaderHighlighted">Datum</td>
                <td width="20%" class="colHeader">Teilnehmergruppen</td>
                <td width="20%" class="colHeader">Zusammenfassung</td>
            </tr>
        </table>

        <h:outputText value="Bitte die Trainingsdaten ausw채hlen, welche hinzugef체gt werden sollen."></h:outputText>

        <h:panelGrid columns="3" styleClass="panelColumns">

            <h:panelGroup>
                <h:outputText value="Von:"/>
                <rich:calendar id="fromTrainingsdate"
                               style="background-color: #F2F2F2"
                               mode="ajax" 
                               locale="de"
                               popup="true"
                               boundaryDatesMode="scroll" 
                               datePattern="dd.MM.yyyy"  
                               value="#{trainingController.nextTrainingDateFromTemp}"
                               valueChangeListener="#{trainingController.trainingDateFromTempChanged}"
                               >
                    <a4j:ajax event="change" render="trainingDatesSelectParams_output"/>
                </rich:calendar>
            </h:panelGroup>

            <h:panelGroup>
                <h:outputText value="Bis:"/>
                <rich:calendar id="toTrainingsdate"
                               style="background-color: #F2F2F2"
                               mode="ajax" 
                               locale="de"
                               popup="true"
                               boundaryDatesMode="scroll" 
                               datePattern="dd.MM.yyyy"  
                               value="#{trainingController.nextTrainingDateToTemp}"
                               valueChangeListener="#{trainingController.trainingDate}"
                               >
                    <a4j:ajax event="change" render="trainingDatesSelectParams_output"/>
                </rich:calendar>
            </h:panelGroup>
            <a4j:commandButton value="Los" action="#{trainingController.calculateMissingTrainings()}" render="availableTrainingsDT, missingTrainingsDT, missingTrainingsPL" />

            <!-- n채chste Zeile -->
<!--            <h:dataTable id="availableTrainingsDT" styleClass="data-table" value="#{trainingController.allExistingTrainings}" var="_item">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Existierend"/>
                    </f:facet>
                    <h:outputText id="itemName" value="#{_item.dateAsString}"/>
                </h:column>
            </h:dataTable>

            <h:dataTable id="missingTrainingsDT" styleClass="data-table" value="#{trainingController.allMissingTrainings}" var="_item">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Fehlend"/>
                    </f:facet>
                    <h:outputText id="itemName" value="#{_item.dateAsString}"/>
                </h:column>
            </h:dataTable>-->

            <rich:dataTable id="availableTrainingsDT" styleClass="data-table" value="#{trainingController.allExistingTrainings}" var="_item" rows="10">
                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="Existierend"/>
                    </f:facet>
                    <h:outputText id="itemName" value="#{_item.dateAsString}"/>
                </rich:column>
            </rich:dataTable>

            <rich:pickList id = "missingTrainingsPL" 
                           value="#{trainingController.listOfNewTrainings}"  
                           converter="#{trainingBean.converter}"
                           sourceCaption="Nicht zugeordnet" 
                           targetCaption="Neu hinzuf체gen" 

                           listWidth="165px" 
                           listHeight="100px" 
                           orderable="true">                 
                <f:selectItems value="#{trainingController.allMissingTrainings}" 
                               var="training" itemValue="#{training}" itemLabel="#{training.dateAsString}" />
            </rich:pickList>     
        </h:panelGrid>

        <div class="navPanel" style="width: 100%;">
            <a4j:commandButton value="&lt;&lt;Previous" style="float:left">
                <rich:toggleControl targetItem="@prev" event="click" />
            </a4j:commandButton>
            <a4j:commandButton value="Next &gt;&gt;" style="float:right">
                <rich:toggleControl targetItem="@next" event="click" />
            </a4j:commandButton>
        </div>
    </div>
</ui:composition>